;ご注文はうさぎですか？のオープニング曲「Daydream cafe」をノイズで演奏するアプリケーション．
;音はラジオで聞けます．
;一番速度を必要とするアプリケーション
INIT:
	MOV SP, 0xEFFF
    MOV D, MUSIC_DATA;開始アドレスの取得
MAIN:
    LOAD C, D;音程取得
    INC D,D
    LOAD B, D;長さ取得
    INC D,D

    CMP B, 0xFFFF;繰り返し
    JMP.z INIT
    CMP B, 0xFFFE;終了
    JMP.z END

    CALL L0;音を出す
    JMP MAIN
END:
    JMP END
;音発生サブルーチン
;破壊:Reg A,B,C
;Reg C:音程
;Reg B:長さ
L0:
    MOV A, C
L1:
    SUB A, A,0x01;SUBの回数で命令サイクル長が変化
    JMP.nz L1

    DEC B,B
    CMP B, 0x00
    RET.z
    JMP L0

trap:;暴走時のトラップ
    JMP trap
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;演奏データ
MUSIC_DATA:
;こころ
    .dw 0x40
    .dw 0x40

    .dw 0x200
    .dw 0x1

    .dw 0x40
    .dw 0x40

    .dw 0x38
    .dw 0x42

    .dw 0x200
    .dw 0x2

    ;ぴょん
    .dw 0x32
    .dw 0x70
    .dw 0x200
    .dw 0x3
    ;ぴょん
    .dw 0x32
    .dw 0x70
    .dw 0x200
    .dw 0x3
    ;待ち
    .dw 0x32
    .dw 0x42

    .dw 0x200
    .dw 0x3
    
    .dw 0x32
    .dw 0x42
    
    .dw 0x200
    .dw 0x8

    ;考える
    .dw 0x38
    .dw 0x70

    .dw 0x200
    .dw 0x1

    .dw 0x38
    .dw 0x40

    .dw 0x200
    .dw 0x2

    .dw 0x40
    .dw 0x40

    .dw 0x200
    .dw 0x1

    .dw 0x40
    .dw 0x40

    ;フリして
    .dw 0x45
    .dw 0x40
    
    .dw 0x40
    .dw 0x40
    
    .dw 0x43
    .dw 0x40
    
    .dw 0x4D
    .dw 0x40

    .dw 0x200
    .dw 0x1
    
    ;もう
    .dw 0x55
    .dw 0x65
    .dw 0x200
    .dw 0x1
    ;ちょっと
    .dw 0x38
    .dw 0x65
    .dw 0x200
    .dw 0x8

    .dw 0x55
    .dw 0x70
    .dw 0x200
    .dw 0x7

    ;近づい
    .dw 0x38
    .dw 0x7F
    .dw 0x200
    .dw 0x1

    .dw 0x32
    .dw 0x60
    .dw 0x200
    .dw 0x1

    .dw 0x38
    .dw 0x40
    .dw 0x200
    .dw 0x1
    
    .dw 0x40
    .dw 0x40
    .dw 0x200
    .dw 0x1

    ;ちゃえ
    .dw 0x45
    .dw 0x35
    .dw 0x200
    .dw 0x1
    .dw 0x45
    .dw 0x35
    .dw 0x200
    .dw 0xD

    ;簡単
    .dw 0x40
    .dw 0x75
    .dw 0x200
    .dw 0x2
    .dw 0x40
    .dw 0x75
    .dw 0x200
    .dw 0x2
    ;には
    .dw 0x40
    .dw 0x40
    .dw 0x200
    .dw 0x1
    .dw 0x40
    .dw 0x40
    .dw 0x200
    .dw 0x8
    ;教え
    .dw 0x45
    .dw 0x7F
    .dw 0x200
    .dw 0x1
    .dw 0x45
    .dw 0x40
    .dw 0x200
    .dw 0x2
    .dw 0x38
    .dw 0x45
    ;ない
    .dw 0x32
    .dw 0x7F
    .dw 0x200
    .dw 0xF

    ;こんなに
    .dw 0x55
    .dw 0x38

    .dw 0x45
    .dw 0x40

    .dw 0x40
    .dw 0x3A

    
    .dw 0x45
    .dw 0x40

    ;好きな
    .dw 0x55
    .dw 0x38

    .dw 0x40
    .dw 0x3A

    .dw 0x45
    .dw 0x40
    
    ;ことは
    .dw 0x55
    .dw 0x38

    .dw 0x32
    .dw 0x43
    .dw 0x38
    .dw 0x17F
    .dw 0x200
    .dw 0xC

    ;内緒なの
    .dw 0x38
    .dw 0x7F
    .dw 0x200
    .dw 0x3
    .dw 0x38
    .dw 0x30
    .dw 0x200
    .dw 0x3
    .dw 0x32
    .dw 0x43

    .dw 0x38
    .dw 0x1CF

    .dw 0xFFFE
    .dw 0xFFFE