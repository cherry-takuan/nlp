# 偽VTL
VTLっぽい奴＋テキストエディタをNLP-16，16Aに実装したい．
試しにCで書いてみた．

## エディタ
edっぽい操作．数値を入れるとその行にカーソルが飛んでaでその位置に挿入，cでその行を上書き，dで削除．

pで全ソース表示．

数値以外にも.で現在のカーソル位置，\$で最終行が指定できる．
例えば`1,4`で1-4行目を表示，`4,$`で4行目から最終行まで表示，`.,3`で先頭から3行目まで表示となる．

rで先頭からプログラムが走る．
おまけでDでギャップバッファのデバッグ表示．

## 偽VTL

だいたいVTL．
変数はA-Zと配列1つのみ．  
\#に数値を代入で指定行(先頭の行番号)に飛ぶ．?は数値の入出力で$が文字の入出力．  
式の評価はちょっと変で左辺をRPNで評価し，右辺に代入．
配列の使い方
```
10 20,2*1=:
20 1:=?
```
実行すると40が返ってくる．
```
10| array[1] = 20*2
20| print(array[1])
```
みたいな感じ．
最上位のスタックを配列のアドレスになり(ここでは1):で配列が使用される位置．

適当に使って試してみて欲しい．

実行できるサンプルプログラム(フィボナッチ数列)
```
10 0=A,1=B
20 AB+=C,B=A,C=B,C=?,',',100,C>20*=#
30 'END\n'
```

マンデルブロ集合の奴
```
10 50=F
20 0,12-=Y
30 0,39-=X
40 X229*100/=C
50 Y416*100/=D
60 C=A
70 D=B
80 0=I
90 BF/=Q,BQF*-=S
100 AA*BB*-F/C+=T
110 AQ*AS*F/+2*D+=B
120 T=A
130 AF/=P,BF/=Q
140 PP*QQ*+5>180*=#
150 I1+=I,I16<90*=#
160 ' '
170 200=#
180 I7I10>*+=I
190 I48+=$
200 X1+=X,X40<40*=#
210 '\n'
220 Y1+=Y,Y12<30*=#
```